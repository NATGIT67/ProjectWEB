<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .status-pending {
            background-color: #fff3e0;
            color: #ef6c00;
        }
        .status-success {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        .status-error {
            background-color: #ffebee;
            color: #c62828;
        }
        .btn-view {
            background: #2196F3;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .btn-view:hover {
            background: #1976D2;
        }
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>
<body class="login-page-body">

    <header class="navbar">
        <div class="container">
            <a href="index.html" class="logo">üåæ EasyRice</a>
            <nav>
            <ul>
                <li><a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
                <li><a href="product.html">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a></li>
                <li><a href="about.html">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</a></li>
                <li><a href="contact.html">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</a></li>
                <li><a href="history.html" class="active">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a></li>
            </ul>
        </nav>
            <div class="user-profile">
                <span>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ä‡∏≤‡∏¢</span>
                <a href="sign-in.html" class="btn-signin" style="margin-left:10px;">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
            </div>
        </div>
    </header>

    <main class="container" style="margin-top: 50px; margin-bottom: 50px;">
        <div class="login-card" style="max-width: 1000px; width: 100%;">
            <div class="login-header" style="text-align: left; border-bottom: 2px solid var(--primary-color); padding-bottom: 15px;">
                <h2><i class="fas fa-history"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
                <p>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏Å‡∏î‡∏≥‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
            </div>

            <div class="order-history-table" style="margin-top: 25px; overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; text-align: left;">
                    <thead>
                        <tr style="background: var(--light-color); color: var(--dark-color);">
                            <th style="padding: 15px;">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</th>
                            <th style="padding: 15px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á</th>
                            <th style="padding: 15px;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</th>
                            <th style="padding: 15px;">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>
                            <th style="padding: 15px;">‡∏°‡∏±‡∏î‡∏à‡∏≥ (50%)</th>
                            <th style="padding: 15px;">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                            <th style="padding: 15px;">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="historyBody">
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 15px;">#ER-2025001</td>
                            <td style="padding: 15px;">20 ‡∏ò.‡∏Ñ. 2025</td>
                            <td style="padding: 15px;">
                                <strong>‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏≠‡∏°‡∏°‡∏∞‡∏•‡∏¥ 105</strong><br>
                                <small>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 50 ‡∏ñ‡∏≤‡∏î (‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏á)</small>
                            </td>
                            <td style="padding: 15px;">‡∏ø650</td>
                            <td style="padding: 15px;">‡∏ø325</td>
                            <td style="padding: 15px;">
                                <span class="status-badge status-pending">‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏•‡∏¥‡∏õ</span>
                            </td>
                            <td style="padding: 15px;">
                                <button class="btn-view"><i class="fas fa-search"></i> ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button>
                            </td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 15px;">#ER-2025002</td>
                            <td style="padding: 15px;">15 ‡∏ò.‡∏Ñ. 2025</td>
                            <td style="padding: 15px;">
                                <strong>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏Å‡∏î‡∏≥‡∏Ç‡πâ‡∏≤‡∏ß (‡∏£‡∏ß‡∏°‡∏Å‡∏•‡πâ‡∏≤)</strong><br>
                                <small>‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà 5 ‡πÑ‡∏£‡πà (‡∏à‡∏±‡∏î‡∏™‡πà‡∏á)</small>
                            </td>
                            <td style="padding: 15px;">‡∏ø9,000</td>
                            <td style="padding: 15px;">‡∏ø4,500</td>
                            <td style="padding: 15px;">
                                <span class="status-badge status-success">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß</span>
                            </td>
                            <td style="padding: 15px;">
                                <button class="btn-view"><i class="fas fa-search"></i> ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    loadOrderHistory();
});

function loadOrderHistory() {
    // Get orders from localStorage (in real app, this would come from server)
    let orders = JSON.parse(localStorage.getItem('easyrice_orders')) || [];

    // If no orders, create sample data
    if (orders.length === 0) {
        orders = [
            {
                id: 'ER-2025001',
                date: '20 ‡∏ò.‡∏Ñ. 2025',
                product: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏≠‡∏°‡∏°‡∏∞‡∏•‡∏¥ 105',
                details: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 50 ‡∏ñ‡∏≤‡∏î (‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏á)',
                total: 650,
                deposit: 325,
                status: 'pending',
                type: 'seedling'
            },
            {
                id: 'ER-2025002',
                date: '15 ‡∏ò.‡∏Ñ. 2025',
                product: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏Å‡∏î‡∏≥‡∏Ç‡πâ‡∏≤‡∏ß (‡∏£‡∏ß‡∏°‡∏Å‡∏•‡πâ‡∏≤)',
                details: '‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà 5 ‡πÑ‡∏£‡πà (‡∏à‡∏±‡∏î‡∏™‡πà‡∏á)',
                total: 9000,
                deposit: 4500,
                status: 'paid',
                type: 'service'
            },
            {
                id: 'ER-2025003',
                date: '10 ‡∏ò.‡∏Ñ. 2025',
                product: '‡∏Ç‡πâ‡∏≤‡∏ß‡πÑ‡∏£‡∏ã‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà',
                details: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 25 ‡∏ñ‡∏≤‡∏î (‡∏à‡∏±‡∏î‡∏™‡πà‡∏á)',
                total: 1125,
                deposit: 562.5,
                status: 'completed',
                type: 'seedling'
            }
        ];
        localStorage.setItem('easyrice_orders', JSON.stringify(orders));
    }

    const tbody = document.getElementById('historyBody');
    tbody.innerHTML = '';

    orders.forEach(order => {
        const statusClass = getStatusClass(order.status);
        const statusText = getStatusText(order.status);

        tbody.innerHTML += `
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 15px;">#${order.id}</td>
                <td style="padding: 15px;">${order.date}</td>
                <td style="padding: 15px;">
                    <strong>${order.product}</strong><br>
                    <small>${order.details}</small>
                </td>
                <td style="padding: 15px;">‡∏ø${order.total.toLocaleString()}</td>
                <td style="padding: 15px;">‡∏ø${order.deposit.toLocaleString()}</td>
                <td style="padding: 15px;">
                    <span class="status-badge status-${order.status}">${statusText}</span>
                </td>
                <td style="padding: 15px;">
                    <button class="btn-view" onclick="viewOrderDetails('${order.id}')">
                        <i class="fas fa-search"></i> ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
                    </button>
                </td>
            </tr>
        `;
    });
}

function getStatusClass(status) {
    switch(status) {
        case 'pending': return 'pending';
        case 'paid': return 'success';
        case 'completed': return 'success';
        case 'cancelled': return 'error';
        default: return 'pending';
    }
}

function getStatusText(status) {
    switch(status) {
        case 'pending': return '‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏•‡∏¥‡∏õ';
        case 'paid': return '‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
        case 'completed': return '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô';
        case 'cancelled': return '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å';
        default: return '‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏•‡∏¥‡∏õ';
    }
}

function viewOrderDetails(orderId) {
    const orders = JSON.parse(localStorage.getItem('easyrice_orders')) || [];
    const order = orders.find(o => o.id === orderId);

    if (order) {
        const details = `
            ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: #${order.id}
            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á: ${order.date}
            ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£: ${order.product}
            ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ${order.details}
            ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ‡∏ø${order.total.toLocaleString()}
            ‡∏°‡∏±‡∏î‡∏à‡∏≥ (50%): ‡∏ø${order.deposit.toLocaleString()}
            ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${getStatusText(order.status)}
        `;

        alert(details);
    }
}

// Logout functionality
document.querySelector('.btn-signin').addEventListener('click', function(e) {
    e.preventDefault();
    if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
        // In real app, clear session/token
        window.location.href = 'sign-in.html';
    }
});
</script>